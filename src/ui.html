<script src="https://unpkg.com/prettier@1.13.0/standalone.js"></script>
<script src="https://unpkg.com/prettier@1.13.0/parser-babylon.js"></script>
<script>
  window.onmessage = async event => {
    if (event.data.pluginMessage.type === 'networkRequest') {
      fetch('https://transfrom.saravieira.now.sh', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          svg: event.data.pluginMessage.data
        })
      })
        .then(rsp => rsp.json())
        .then(data => {
          const a = prettier.format(data.data, {
            parser: 'babylon',
            plugins: prettierPlugins
          })
          parent.postMessage({ pluginMessage: a }, '*')
        })
    }
  }
</script>
